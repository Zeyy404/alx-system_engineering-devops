#!/usr/bin/env bash
# display information about subdomains from my domain

display_info () {
    domain="$1"
    subdomain="$2"
    dns_info=$(dig +short "$subdomain.$domain")
    if [[ -z "$dns_info" ]]; then
	echo "The subdomain $subdomain does not have any DNS record."
    else
	record_type="N/A"
	if [[ "$dns_info" =~ ^[0-9.]+$ ]]; then
	    record_type="A"
	elif [[ "$dns_info" =~ ^[a-fA-F0-9:]+$ ]]; then
	    record_type="AAAA"
	elif [[ "$dns_info" =~ ^[a-zA-Z0-9.-]+$ ]]; then
	    record_type="CNAME"
	fi
	echo "The subdomain $subdomain is a $record_type record and points to $dns_info"
    fi
}

if [ "$#" -eq 1 ]
then
    display_info "$1" "www"
    display_info "$1" "lb-01"
    display_info "$1" "web-01"
    display_info "$1" "web-02"
elif [ "$#" -eq 2 ]
then
    display_info "$1" "$2"
fi
